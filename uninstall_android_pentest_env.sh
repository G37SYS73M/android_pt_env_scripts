#!/bin/bash

set -e

echo "[*] Removing Android pentesting tools..."

TOOLS_DIR="$HOME/android-pentest-tools"
ANDROID_SDK_DIR="$HOME/Android/Sdk"
BASHRC="$HOME/.bashrc"

# Remove APKTool symlinks
sudo rm -f /usr/local/bin/apktool /usr/local/bin/apktool.jar

# Remove JADX, apktool, pidcat directories
rm -rf "$TOOLS_DIR"

# Remove JADX path from .bashrc
sed -i '/jadx\/build\/jadx\/bin/d' "$BASHRC"

# Remove ANDROID_HOME export from .bashrc
sed -i '/ANDROID_HOME/d' "$BASHRC"

# Remove PATH additions for Android tools
sed -i '/cmdline-tools\/latest\/bin/d' "$BASHRC"
sed -i '/platform-tools/d' "$BASHRC"

# Remove Android SDK
rm -rf "$ANDROID_SDK_DIR"

# Remove Frida and Objection
echo "[*] Uninstalling Python tools (frida-tools, objection)..."
pip3 uninstall -y frida-tools objection

# Remove pidcat symlink
sudo rm -f /usr/local/bin/pidcat

echo "[+] Uninstallation complete."
echo "[!] Please restart your terminal or run: source ~/.bashrc"
